<!DOCTYPE html>
<html lang="zh-tw">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Session Links Verification</title>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            background-color: #f0f4f8;
        }
        .header {
            text-align: center;
            margin-bottom: 2rem;
            padding: 2rem;
            background: linear-gradient(135deg, #3a86ff, #00bfff);
            color: white;
            border-radius: 12px;
        }
        .verification-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }
        .session-check {
            background: white;
            padding: 1rem;
            border-radius: 8px;
            border-left: 4px solid #3a86ff;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .session-check.success {
            border-left-color: #22c55e;
        }
        .session-check.error {
            border-left-color: #ef4444;
        }
        .session-id {
            font-family: monospace;
            font-size: 0.9rem;
            color: #666;
        }
        .session-title {
            font-weight: 600;
            margin: 0.5rem 0;
            color: #2d3748;
        }
        .status {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        .status.success {
            background: #dcfce7;
            color: #166534;
        }
        .status.error {
            background: #fef2f2;
            color: #dc2626;
        }
        .summary {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .summary.success {
            border-left: 6px solid #22c55e;
        }
        .test-link {
            color: #3a86ff;
            text-decoration: none;
            font-size: 0.9rem;
        }
        .test-link:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ”— Session Links Verification</h1>
        <p>Verifying all session links are functional after the fix</p>
    </div>

    <div id="verification-results" class="verification-grid">
        <!-- Results will be populated by JavaScript -->
    </div>

    <div id="summary" class="summary">
        <h2>Running verification...</h2>
        <p>Please wait while we check all session links.</p>
    </div>

    <script>
        // Session data from enhanced.html (updated with correct titles matching actual files)
        const sessionsToVerify = [
            { id: "session-06738cfc", title: "æ·±æ€è€ƒç«¯ä¾§å¤šæ¨¡æ€å¤§æ¨¡å‹TinyDongni&Deepseekçš„åˆ›æ–°å®è·µ" },
            { id: "session-766c6ee4", title: "AI Agent å¦‚ä½•é‡å¡‘æœ‰å£°å†…å®¹çš„ç”Ÿäº§ä¸åˆ†å‘" },
            { id: "session-8ab99e20", title: "AI Agent+IoTæŠ€æœ¯æ–¹æ¡ˆæ–°åœºæ™¯åˆ›æ–°åº”ç”¨" },
            { id: "session-f48d2c98", title: "AIèµ‹èƒ½eBayæ”¯ä»˜é£æ§ï¼šä»ç”¨æˆ·è¡Œä¸ºåˆ°äº¤æ˜“å®‰å…¨çš„å…¨é¢æ™ºèƒ½åŒ–" },
            { id: "session-111579d4", title: "CangjieMagicï¼šåŸºäºä»“é¢‰è¯­è¨€çš„Agentå¼€å‘æ¡†æ¶å®è·µ" },
            { id: "session-12d77a9f", title: "Coding Agent é©±åŠ¨ç ”å‘ææ•ˆï¼šä»å®è·µåˆ°æµç¨‹æ”¹è¿›" },
            { id: "session-6db34cc7", title: "DLRoveråœ¨ä¸‡å¡è§„æ¨¡å¤§æ¨¡å‹è®­ç»ƒä¸­çš„ç¨³å®šæ€§å®è·µ" },
            { id: "session-688e55cf", title: "Data+AI ä¸‹ä¸€ä»£æ•°æ™ºå¹³å°å»ºè®¾" },
            { id: "session-25c654c8", title: "DeepResearchå¦‚ä½•åœ¨ä¼ä¸šå†…è½åœ°" },
            { id: "session-f58850fb", title: "GenAI åº”ç”¨æ—¶ä»£ï¼Œå¼€å‘æ€æƒ³å¦‚ä½•å˜é©ï¼Ÿ" },
            { id: "session-e53a6872", title: "Infinityï¼šè§†è§‰è‡ªå›å½’ç”Ÿæˆæ–°è·¯çº¿" },
            { id: "session-0a732304", title: "Training, Inference, Agents: Beyond Apps in the AI-Native World" },
            { id: "session-0c9753a1", title: "å¤§æ¨¡å‹è°ƒä¼˜æ•°æ®çš„é«˜æ•ˆæ„å»ºä¸è¿›åŒ–æ–¹æ³•" },
            { id: "session-0e587e62", title: "æ„å»ºé¢å‘å¤§æ¨¡å‹çš„å®‰å…¨æ²»ç†ä½“ç³»å’Œåº”ç”¨å®è·µ" },
            { id: "session-162e4b8a", title: "å¼€åœºè‡´è¾" },
            { id: "session-188a161a", title: "ä¸€å¹´ä¸Šçº¿è¶… 10 æ¬¾äº§å“ï¼ŒAI æ—¶ä»£å¦‚ä½•åšç‹¬ç«‹å¼€å‘" },
            { id: "session-49b991f1", title: "åŠ é€Ÿ AI æ¨ç†ä¸æ£€ç´¢ç”Ÿæˆï¼šåœ¨ PB çº§æ•°æ®æ¹–ä¸Šå®ç° Parquet æŸ¥è¯¢ 1000 å€æ€§èƒ½æå‡" },
            { id: "session-5ca8220f", title: "ä»Copilotåˆ°Agentï¼šAIç¼–ç¨‹çš„èŒƒå¼é©æ–°" },
            { id: "session-7b9e519b", title: "QAnythingï¼šå¤§æ¨¡å‹é©±åŠ¨ä¸‹çš„çŸ¥è¯†åº“é—®ç­”ä½“ç³»é©æ–°ä¸å®è·µ" },
            { id: "session-8fb4068a", title: "å¤§æ¨¡å‹åŠ©åŠ›è½¯ä»¶ç ”å‘äººæœºååŒè¿›åŒ–å®è·µ" },
            { id: "session-972e13af", title: "æ·±å…¥å¯¹æ¯”æ™ºèƒ½ä½“åè®®ï¼šMCPã€A2Aã€ANP" },
            { id: "session-af38178a", title: "å¤§æ¨¡å‹æ—¶ä»£çš„æ•°æ®éšç§ä¿æŠ¤æŠ€æœ¯" },
            { id: "session-b2e89c81", title: "å¤§æ¨¡å‹æ¨ç†ä¼˜åŒ–ï¼šä»ç†è®ºåˆ°å®è·µ" },
            { id: "session-c9ca70ba", title: "å¤šæ¨¡æ€å¤§æ¨¡å‹åœ¨æ™ºæ…§åŸå¸‚ä¸­çš„åº”ç”¨" },
            { id: "session-d9f22387", title: "AIé©±åŠ¨çš„è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶è®¾è®¡" },
            { id: "session-dfa27999", title: "è¾¹ç¼˜è®¡ç®—ä¸­çš„AIæ¨¡å‹éƒ¨ç½²ç­–ç•¥" },
            { id: "session-e16475e5", title: "è”é‚¦å­¦ä¹ åœ¨é‡‘èé£æ§ä¸­çš„å®è·µ" },
            { id: "session-e79727c0", title: "å¤§è§„æ¨¡çŸ¥è¯†å›¾è°±æ„å»ºä¸åº”ç”¨" },
            { id: "session-e9c5f110", title: "AIè¾…åŠ©çš„ä»£ç å®¡æŸ¥ç³»ç»Ÿè®¾è®¡" },
            { id: "session-f9c0d626", title: "å¼ºåŒ–å­¦ä¹ åœ¨æ¨èç³»ç»Ÿä¸­çš„åˆ›æ–°åº”ç”¨" }
        ];

        async function verifySessionLink(session) {
            const url = `html/sessions/${session.id}/index.html`;

            try {
                const response = await fetch(url, { method: 'HEAD' });
                return {
                    ...session,
                    status: response.ok ? 'success' : 'error',
                    statusCode: response.status,
                    url: url
                };
            } catch (error) {
                return {
                    ...session,
                    status: 'error',
                    statusCode: 'Network Error',
                    url: url,
                    error: error.message
                };
            }
        }

        // é©—è­‰æ¨™é¡Œæ˜¯å¦èˆ‡å¯¦éš›æª”æ¡ˆåŒ¹é…
        async function verifySessionContent(session) {
            const url = `html/sessions/${session.id}/index.html`;

            try {
                const response = await fetch(url);
                if (response.ok) {
                    const html = await response.text();
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(html, 'text/html');
                    const actualTitle = doc.querySelector('.report-title')?.textContent?.trim();

                    return {
                        ...session,
                        actualTitle: actualTitle,
                        titleMatch: actualTitle === session.title,
                        status: 'success'
                    };
                } else {
                    return {
                        ...session,
                        status: 'error',
                        statusCode: response.status
                    };
                }
            } catch (error) {
                return {
                    ...session,
                    status: 'error',
                    error: error.message
                };
            }
        }

        function createSessionCheckElement(result) {
            const div = document.createElement('div');
            div.className = `session-check ${result.status}`;
            
            div.innerHTML = `
                <div class="session-id">${result.id}</div>
                <div class="session-title">${result.title}</div>
                <div>
                    <span class="status ${result.status}">
                        ${result.status === 'success' ? 'âœ… Available' : 'âŒ Not Found'}
                    </span>
                    <a href="${result.url}" class="test-link" target="_blank">Test Link</a>
                </div>
                ${result.statusCode ? `<div style="font-size: 0.8rem; color: #666; margin-top: 0.5rem;">Status: ${result.statusCode}</div>` : ''}
            `;
            
            return div;
        }

        function updateSummary(results) {
            const successCount = results.filter(r => r.status === 'success').length;
            const totalCount = results.length;
            const successRate = Math.round((successCount / totalCount) * 100);
            
            const summaryDiv = document.getElementById('summary');
            summaryDiv.className = `summary ${successCount === totalCount ? 'success' : 'error'}`;
            
            summaryDiv.innerHTML = `
                <h2>${successCount === totalCount ? 'ğŸ‰ All Links Working!' : 'âš ï¸ Some Links Need Attention'}</h2>
                <p><strong>${successCount}/${totalCount}</strong> sessions are accessible (${successRate}% success rate)</p>
                ${successCount === totalCount ? 
                    '<p style="color: #22c55e;">âœ… The session file fix was successful! All session links are now functional.</p>' :
                    '<p style="color: #ef4444;">âŒ Some session files are still missing or inaccessible.</p>'
                }
            `;
        }

        async function runVerification() {
            const resultsContainer = document.getElementById('verification-results');
            const results = [];
            
            // Clear previous results
            resultsContainer.innerHTML = '';
            
            // Verify each session
            for (const session of sessionsToVerify) {
                const result = await verifySessionLink(session);
                results.push(result);
                
                // Add result to display
                const element = createSessionCheckElement(result);
                resultsContainer.appendChild(element);
                
                // Update summary after each check
                updateSummary(results);
                
                // Small delay to avoid overwhelming the server
                await new Promise(resolve => setTimeout(resolve, 100));
            }
            
            console.log('Verification complete:', results);
        }

        // Start verification when page loads
        document.addEventListener('DOMContentLoaded', runVerification);
    </script>
</body>
</html>
